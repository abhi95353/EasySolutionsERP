
<div class="row px-1">
    <div class="col-8 col-lg-10">
      <h3 style="letter-spacing: 0.9px; text-transform: uppercase">
        Manage&nbsp;Notice&nbsp;Board
      </h3>
    </div>
  
    <div
      class="col-4 col-lg-2"
      style="text-align: right"
      *ngIf="this.school_code != 'Select School'"
    >
      <span
        class="mt-lg-1 btn btn-success btn-sm rounded-pill"
        (click)="openNoticeBox({} , 'add')"
        >Create&nbsp;<i class="fa fa-plus"></i
      ></span>
    </div>
    <hr class="p-0 m-0" />
    <br />
   
    <div
      class="col-12 col-lg-10 col-xxl-10 offset-lg-1 offset-xxl-1"
      *ngIf="this.school_code != 'Select School'; else notFound"
    >
    <div class="col-12 my-2 tabs">
        <div class="row px-1">
            <div class="col-12 col-lg-8 my-2">
                <!-- <button class="btn btn-sm btn-secondary"  (click)="copy('ok')">Copy Data</button>&nbsp;
                <button class="btn btn-sm btn-success btn-block" (click)="openPDF()">Download PDF</button>
                &nbsp;
                <button class="btn btn-sm btn-warning" (click)="downloadCSV()">Export Excel</button>&nbsp;
                <button class="btn btn-sm btn-primary">Print</button>&nbsp; -->
 
            </div>
            <div class="col-12 col-lg-4">
                <div style="display: flex;justify-content: end;">
                    <input type="search" class="form-control" placeholder="Search" [(ngModel)]="searchText" >
                    <i class="fa fa-search fa-lg" style="background-color: lightseagreen;color: white;padding: 0px 10px;margin-left: -10px;border-radius: 5px;padding-top: 12px;"></i>
                </div>
            </div>
        </div>
        <div class="table-responsive mx-1 my-4" style="border-radius: 5px;">
            <table class="table table-striped table-hover table-bordered border-success" id="htmlData">
                <thead class="bg-success text-white">
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Head</th>
                        <th scope="col">Body</th>
                        <th scope="col">Image</th>
                        <th scope="col">Send To</th>
                        <th scope="col">Status</th>
                        <th scope="col">Approve/Reject</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let dt of noticeList |  filter:searchText  ;let i = index">
                        <td scope="row">{{i+1}}</td>
                        <td>{{dt.head}}</td>
                        <td [innerHTML]="dt.body"></td>
                        <td><img src="https://{{imgUrl}}{{dt.image}}" style="width: 80px;" *ngIf='dt.image != ""' alt="Timeline"></td>
                        <td>
                          <ng-container *ngFor="let ls of dt.to_student"><span class="rounded-pill" style="display:inline-block; background-color: wheat;padding: 8px; margin: 10px 8px;">{{ls.name}}</span></ng-container>
                          <ng-container *ngFor="let ls of dt.to_staff"><span class="rounded-pill" style="display:inline-block;background-color: wheat;padding: 8px; margin: 10px 8px;">{{ls.name}}</span></ng-container>
                          <ng-container *ngFor="let ls of dt.to_division_standard"><span class="rounded-pill" style="display:inline-block;background-color: wheat;padding: 8px; margin: 10px 8px;">{{ls.standard.notation}} / {{ls.division.notation}}</span></ng-container>
                          <span *ngIf="dt.all_student" class="rounded-pill" style="display:inline-block;background-color: wheat;padding: 8px; margin: 10 8px;">All Students</span>
                          <span *ngIf="dt.all_employee" class="rounded-pill" style="display:inline-block;background-color: wheat;padding:8px; margin: 10 8px;">All Employee</span>
                          <span *ngIf="dt.all_divisions" class="rounded-pill" style="display:inline-block;background-color: wheat;padding: 8px; margin: 10 8px;">All Divisions</span>
                        </td>
                        <td>
                          <label *ngIf="dt.is_approved == null" class="alert-warning alert">Pending</label>
                          <label *ngIf="dt.is_approved == 1" class="alert-success alert">Approved</label>
                          <label *ngIf="dt.is_approved == 0" class="alert-danger alert">Reject</label>
                        </td>
                        
                        <td>
                            <i class="fa fa-check text-success" title="Approve" style="cursor: pointer;" (click)="updateNoticeApprove(dt.id , dt.uuid , 1)"></i>&nbsp;
                            <i class="fa fa-times text-danger" title="Reject" style="cursor: pointer;" (click)="updateNoticeApprove(dt.id , dt.uuid , 0)"></i>&nbsp;
                           
                        </td>
                        
                    </tr>
                </tbody>
            </table>
        </div>
    </div> 
    </div>
  
    <ng-template #notFound>
      <div class="row my-2 px-2">
        <div
          class="col-12 tabs"
          style="position: relative; display: flex; align-items: baseline"
        >
          <i class="fa fa-building fa-2x text-danger" aria-hidden="true"></i
          >&nbsp;&nbsp;&nbsp;
          <h5 class="text-danger">
            No school Selected. Please Select the school
          </h5>
        </div>
      </div>
    </ng-template>
  </div>
  
<app-create-notic></app-create-notic> 