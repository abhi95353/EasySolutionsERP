<div class="row">
    <div class="col-12">
        <h3 style="text-transform: uppercase; letter-spacing: 0.9px;">Fee Report</h3>
    </div>
    <hr class="p-0 m-0">

    <br>


    <div class="col-12 my-2 py-4 " style="background-color: white;">
        <div class="row px-1">
            <div class="col-12 col-lg-6 my-2">
               
                <button class="btn btn-sm btn-warning" (click)="downloadCSV()">Export Excel</button>&nbsp;
                

            </div>
            <div class="col-12 col-lg-6" style="text-align: right;">
               
                    <div style="display: flex;justify-content: end;">
                      <input type="search" class="form-control" placeholder="Search" [(ngModel)]="searchText">
                </div>
                

            </div>
            
        </div> 
        <div class="table-responsive mx-1 my-4" style="border-radius: 5px;">
            <table class="table table-striped table-hover table-bordered border-success table-responsive table-sm table-report" id="htmlData">
                <thead class="bg-success text-white">
                    <tr>
                        <th scope="col">#</th>
                        <th scope="col">Transport&nbsp;Name</th>
                        <th scope="col">Transport&nbsp;NO</th>
                        <th scope="col">Fee</th>
                        <th scope="col">Month</th>
                    </tr>
                </thead> 
                <tbody>

                    <ng-container *ngIf="this.reportList == null; else nodatafound">
                        <tr>
                                
                            <td [attr.colspan]="12" style="text-align: center;font-size: 20px;color: red;">No Data Found </td>
                        </tr>
                    </ng-container>

                    <ng-template #nodatafound>
                        <ng-container *ngIf="loadingStatus; else loading">
                            <tr>
                                <td [attr.colspan]="12" style="text-align: center; font-size: 24px; color: red;"><i class="fa fa-spinner fa-pulse"></i></td>
                            </tr>
                        </ng-container>
                        <ng-template #loading>
                            <ng-container *ngFor="let data of reportList  | filter:searchText;let i = index;let l = last">
                                <tr>
                                    <td>{{i+1}}</td>
                                    <td>{{data.tr_name}}</td>
                                    <td>{{data.tr_no}}</td>
                                    <td>{{data.fee}}</td>
                                    <td><ng-container *ngFor="let dt of data.month"  >
                                        <span style="text-decoration:underline; color:blue; cursor:pointer" 
                                         data-bs-toggle="modal" data-bs-target="#exampleModal"
                                        (click)="gotoMonth(data , dt)">{{dt.month}}</span>&nbsp;</ng-container></td>
                                </tr>
                            </ng-container>
                        </ng-template>
                    </ng-template>

                    
                    
                    
                </tbody>
            </table>
         
        </div>
    </div>
</div>



  
<!-- Button trigger modal -->
<!-- <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" (click)="openBox()">
    Launch demo modal
  </button> -->
  
  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" >
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel" *ngIf="boxView">{{studentDetails.tr_name}} ({{month}})</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>     
        <div class="ml-2 mt-2 pl-2">
            <button
                *ngIf="boxView"
                class="btn btn-warning btn-sm"
                [useExistingCss]="true"
                printTitle="{{studentDetails.tr_name}} ({{month}})" 
                printSectionId="print-section"
                ngxPrint>print
            </button>
        </div>
            
        <div class="modal-body" id="print-section">
            
            <table class="table table-striped" >
                <thead>
                  <tr>
                    <td>#</td>
                    <td>Name</td>
                    <td>Account</td>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let dt of studentList; let i = index">
                        <td>{{ i + 1}}</td>
                        <td>{{dt.name}}</td>
                        <td>{{dt.account}}</td>
                  </tr>
                </tbody>
              </table>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="closeBox()">Close</button>
        </div>
      </div>
    </div>
  </div>