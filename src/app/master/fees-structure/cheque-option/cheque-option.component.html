<div class="row">
  <div class="col-lg-10 col-8">
    <h3 style="text-transform: uppercase; letter-spacing: 0.9px">
      Cheque List
    </h3>
  </div>
  <div
    class="col-4 col-lg-2"
    style="text-align: right"
    *ngIf="this.school_code != 'Select School'"
  >
    <span
      class="mt-lg-1 btn btn-success btn-sm rounded-pill"
      [routerLink]="['../custom-fees', { action: 'add', id: null }]"
      >Add&nbsp;&nbsp;<i class="fa fa-plus-square"></i
    ></span>
  </div>
  <hr class="p-0 m-0" />
 
  <br />

  <div
    class="col-12 my-2 tabs"
    *ngIf="this.school_code != 'Select School'; else notFound"
  >
    <div class="row px-1">
      <div class="col-12 col-lg-4">
        <div style="display: flex; justify-content: end">
          <input
            type="search"
            class="form-control"
            placeholder="Ex: Name, Code"
            title="Ex: Name, Code"
            [(ngModel)]="searchText"
          />
          <i
            class="fa fa-search fa-lg"
            style="
              background-color: lightseagreen;
              color: white;
              padding: 0px 10px;
              margin-left: -10px;
              border-radius: 5px;
              padding-top: 12px;
            "
          ></i>
        </div>
      </div>
    </div>
    <div class="table-responsive mx-1 my-4" style="border-radius: 5px">
      <table class="table table-sm table-hover table-bordered">
        <thead class="bg-success text-white">
          <tr>
            <th scope="col">#</th>
            <th scope="col">Date</th>
            <th scope="col">Slip&nbsp;No</th>
            <th scope="col">Collect&nbsp;Type</th>
            <th scope="col">Amount</th>
            <th scope="col">Student&nbsp;Details</th>
            <th scope="col">Cheque&nbsp;Details</th>
            <th scope="col">Cheque&nbsp;Status</th>
            <th scope="col">Action</th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngIf="showChequeList.length > 0; else loading">
            <tr *ngFor="let data of showChequeList | filter:searchText; let i = index">
              <td>{{ i + 1 }}</td>
              <td>{{ data.date }}</td>
              <td>{{ data.slip_no }}</td>
              <td>{{ data.collect_details.collect_type }}</td>
              <td>&#8377;{{ data.cheque_details.amount }}</td>
              <td>{{data.student.name}} , {{ data.student.account }}</td>
              <td>
                
                  {{ data.cheque_details.bank }} , {{ data.cheque_details.ifsc_code }} , Cheque No:
                  {{ data.cheque_details.cheque_no }}
              </td>
              <td>
                <span
                  class="text-warning"
                  *ngIf="data.cheque_payment_status.status == 'Pending'"
                  >{{ data.cheque_payment_status.status }}</span
                >
                <span
                  class="text-danger"
                  *ngIf="data.cheque_payment_status.status == 'NonCleared'"
                  >{{ data.cheque_payment_status.status }}</span
                >
                <span
                  class="text-waring"
                  *ngIf="data.cheque_payment_status.status == 'Cleared'"
                  >{{ data.cheque_payment_status.status }}</span
                >
                <span
                  class="text-danger"
                  *ngIf="data.cheque_payment_status.status == 'Bounce'"
                  >{{ data.cheque_payment_status.status }}</span
                >
              </td>
              <td>
                <i class="fa fa-print" aria-hidden="true" (click)="printPage(data , true)"></i>&nbsp;
                <i
                  class="fa fa-check text-success"
                  aria-hidden="true"
                  (click)="updateCheque(data.id, data.uuid, 'success')"
                ></i>
                &nbsp;
                <i
                  class="fa fa-times text-danger"
                  aria-hidden="true"
                  (click)="updateCheque(data.id, data.uuid, 'danger')"
                ></i>
              </td>
            </tr>
          </ng-container>
          <ng-template #loading>
            <tr>
              <td [attr.colspan]="10" style="text-align: center">
                <i class="fas fa-spinner fa-pulse fa-lg"></i>
              </td>
            </tr>
          </ng-template>
        </tbody>
        <tbody></tbody>
      </table>
    </div>
  </div>
  <ng-template #notFound>
    <div class="row my-2 px-2">
      <div
        class="col-12 tabs"
        style="position: relative; display: flex; align-items: baseline"
      >
        <i class="fa fa-building fa-2x text-danger" aria-hidden="true"></i
        >&nbsp;&nbsp;&nbsp;
        <h5 class="text-danger">
          No school Selected. Please Select the school
        </h5>
      </div>
    </div>
  </ng-template>
</div>

<div
  style="
    position: absolute;
    top: 0;
    left: 0;
    background-color: whitesmoke;
    width: 100%;
    height: 100%;
    z-index: 10;
  "
  *ngIf="printStatus"
>
  <div
    style="
      position: absolute;
      width: 50%;
      left: 50%;
      top: 10px;
      transform: translateX(-50%);
    "
    id="print-section"
  >
    <div style="border: 1px solid black;padding: 8px 8px">
      <div>
        <h3 style="text-align: center">Deposit&nbsp;Slip</h3>
      </div>
      <div
        style="display: flex; justify-content: space-between;"
      >
        <div>
          <span><b>Deposit To:</b> {{printValue.school_name}}</span>
        </div>
        <div>
          <span><b>Deposit By:</b> {{printValue.payer}}</span>
        </div>
      </div>
      <ng-container>
      <div>
        <span><b>Bank&nbsp;Name&nbsp;:</b> {{printValue.cheque_details.bank}}</span>
      </div>
      <div>
        <span><b>IFS&nbsp;Code:</b> {{printValue.cheque_details.ifsc_code}}</span>
      </div>
      <div>
        <span><b>Cheque&nbsp;No:</b> {{printValue.cheque_details.cheque_no}}</span>
      </div>
      <div>
        <span><b>Date:</b> {{printValue.date}}</span>
      </div>
    </ng-container>
      <div><b>Status:</b> {{printValue.cheque_payment_status.status}}</div>
      <div
        style="display: flex; justify-content: space-between; padding: 8px 8px"
      >
        <div>
          <span>Remarks</span>
        </div>
        <div>
          <span>Signature:</span>
        </div>
      </div>
    </div>
  </div>

  <div style="position: absolute;top: 50%;transform: translate(-50%,-50%);left:50%;">
    <button printSectionId="print-section" ngxPrint>print</button>&nbsp;&nbsp;&nbsp;
    <button (click)="printPage(null , false)">Cancel</button>
  </div>

</div>




